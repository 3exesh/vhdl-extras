
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>lcar_ops &#8212; VHDL-extras 1.0 documentation</title>
    <link rel="stylesheet" href="../../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/project.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '1.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <script type="text/javascript" src="http://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS_CHTML"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="lfsr_ops" href="lfsr_ops.html" />
    <link rel="prev" title="interrupt_ctl" href="interrupt_ctl.html" />
   
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9">

  </head>
  <body>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="lcar-ops">
<h1>lcar_ops<a class="headerlink" href="#lcar-ops" title="Permalink to this headline">¶</a></h1>
<p><a class="reference external" href="https://github.com/kevinpt/vhdl-extras/blob/master/rtl/extras/lcar_ops.vhdl">extras/lcar_ops.vhdl</a></p>
<div class="section" id="dependencies">
<h2>Dependencies<a class="headerlink" href="#dependencies" title="Permalink to this headline">¶</a></h2>
<p>None</p>
</div>
<div class="section" id="description">
<h2>Description<a class="headerlink" href="#description" title="Permalink to this headline">¶</a></h2>
<p>This package provides a component that implements the <a class="reference external" href="https://en.wikipedia.org/wiki/Elementary_cellular_automaton">Wolfram Linear
Cellular Automata Register (LCAR)</a>
as described in “Statistical Mechanics
of Cellular Automata”, Wolfram 1983. The LCAR implemented in <a class="reference internal" href="#extras.lcar_ops.wolfram_lcar" title="extras.lcar_ops.wolfram_lcar"><code class="xref vhdl vhdl-entity docutils literal"><span class="pre">wolfram_lcar</span></code></a>
uses rules 90 and 150 for each cell as defined by an input <code class="docutils literal"><span class="pre">Rule_map</span></code> where
a ‘0’ indicates rule 90 and ‘1’ indicates rule 150 for the corresponding
cell in the State register.</p>
<p>The LCAR using rules 90 and 150 can produce output equivalent to maximal
length LFSRs but with the advantage of less correlation between bits of
the state register. This makes the LCAR more suitable for pseudo-random
number generation. The predefined <code class="docutils literal"><span class="pre">LCAR_*</span></code> constants provide rule maps for
maximal length sequences.</p>
<p>For basic pseudo-random state generation it is sufficient to tie the
<code class="docutils literal"><span class="pre">Left_in</span></code> and <code class="docutils literal"><span class="pre">Right_in</span></code> inputs to ‘0’.</p>
<div class="highlight-vhdl"><div class="highlight"><pre><span class="k">library</span> <span class="nn">extras</span><span class="p">;</span>
<span class="k">use</span> <span class="nn">extras.lcar_ops.all</span><span class="p">;</span>

<span class="k">constant</span> <span class="n">WIDTH</span> <span class="o">:</span> <span class="kt">positive</span> <span class="o">:=</span> <span class="mi">8</span><span class="p">;</span>
<span class="k">constant</span> <span class="n">rule</span> <span class="o">:</span> <span class="kt">std_ulogic_vector</span><span class="p">(</span><span class="n">WIDTH</span><span class="o">-</span><span class="mi">1</span> <span class="k">downto</span> <span class="mi">0</span><span class="p">)</span> <span class="o">:=</span> <span class="n">lcar_rule</span><span class="p">(</span><span class="n">WIDTH</span><span class="p">);</span>
<span class="k">variable</span> <span class="n">state</span> <span class="o">:</span> <span class="kt">std_ulogic_vector</span><span class="p">(</span><span class="n">WIDTH</span><span class="o">-</span><span class="mi">1</span> <span class="k">downto</span> <span class="mi">0</span><span class="p">)</span> <span class="o">:=</span> <span class="p">(</span><span class="k">others</span> <span class="o">=&gt;</span> <span class="sc">&#39;1&#39;</span><span class="p">);</span>
<span class="p">...</span>
<span class="c1">-- Basic usage with default &#39;0&#39;s shifting in from ends</span>
<span class="n">state</span> <span class="o">:=</span> <span class="n">next_wolfram_lcar</span><span class="p">(</span><span class="n">state</span><span class="p">,</span> <span class="n">rule</span><span class="p">);</span>
</pre></div>
</div>
<div class="highlight-vhdl"><div class="highlight"><pre><span class="k">library</span> <span class="nn">extras</span><span class="p">;</span>
<span class="k">use</span> <span class="nn">extras.lcar_ops.all</span><span class="p">;</span>

<span class="k">constant</span> <span class="n">WIDTH</span> <span class="o">:</span> <span class="kt">positive</span> <span class="o">:=</span> <span class="mi">8</span><span class="p">;</span>
<span class="k">constant</span> <span class="n">rule</span>  <span class="o">:</span> <span class="kt">std_ulogic_vector</span><span class="p">(</span><span class="n">WIDTH</span><span class="o">-</span><span class="mi">1</span> <span class="k">downto</span> <span class="mi">0</span><span class="p">)</span> <span class="o">:=</span> <span class="n">lcar_rule</span><span class="p">(</span><span class="n">WIDTH</span><span class="p">);</span>
<span class="k">signal</span>   <span class="n">state</span> <span class="o">:</span> <span class="kt">std_ulogic_vector</span><span class="p">(</span><span class="n">WIDTH</span><span class="o">-</span><span class="mi">1</span> <span class="k">downto</span> <span class="mi">0</span><span class="p">)</span> <span class="o">:=</span> <span class="p">(</span><span class="k">others</span> <span class="o">=&gt;</span> <span class="sc">&#39;1&#39;</span><span class="p">);</span>
<span class="p">...</span>

<span class="n">wl</span><span class="o">:</span> <span class="n">wolfram_lcar</span>
  <span class="k">port</span> <span class="k">map</span> <span class="p">(</span>
    <span class="n">Clock</span> <span class="o">=&gt;</span> <span class="n">clock</span><span class="p">,</span>
    <span class="n">Reset</span> <span class="o">=&gt;</span> <span class="n">reset</span><span class="p">,</span>
    <span class="n">Enable</span> <span class="o">=&gt;</span> <span class="n">enable</span><span class="p">,</span>

    <span class="n">Rule_map</span> <span class="o">=&gt;</span> <span class="n">rule</span>
    <span class="n">Left_in</span> <span class="o">=&gt;</span> <span class="sc">&#39;0&#39;</span><span class="p">,</span>
    <span class="n">Right_in</span> <span class="o">=&gt;</span> <span class="sc">&#39;0&#39;</span><span class="p">,</span>

    <span class="n">State</span> <span class="o">=&gt;</span> <span class="n">state</span>
  <span class="p">);</span>
</pre></div>
</div>
<span class="target" id="package-extras.lcar_ops"></span></div>
<div class="section" id="components">
<h2>Components<a class="headerlink" href="#components" title="Permalink to this headline">¶</a></h2>
<div class="section" id="wolfram-lcar">
<h3>wolfram_lcar<a class="headerlink" href="#wolfram-lcar" title="Permalink to this headline">¶</a></h3>
<object data="../../_images/symbol-lcar_ops-wolfram_lcar.svg" type="image/svg+xml">
            <p class="warning">component wolfram_lcar is
generic (
  RESET_ACTIVE_LEVEL : std_ulogic
);
port (
  --# {{clocks|}}
  Clock : in std_ulogic;
  Reset : in std_ulogic;
  Enable : in std_ulogic;
  --# {{control|}}
  Rule_map : in std_ulogic_vector;
  --# {{data|}}
  Left_in : in std_ulogic;
  Right_in : in std_ulogic;
  State : out std_ulogic_vector
);
end component;</p></object>
<div class="line-block">
<div class="line"><br /></div>
</div>
<dl class="entity">
<dt id="extras.lcar_ops.wolfram_lcar">
<code class="descclassname">lcar_ops.</code><code class="descname">wolfram_lcar</code><a class="headerlink" href="#extras.lcar_ops.wolfram_lcar" title="Permalink to this definition">¶</a></dt>
<dd><p>General purpose implementation of a rule 150/90 LCAR.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Generics:</th><td class="field-body"><ul class="first simple">
<li><strong>RESET_ACTIVE_LEVEL</strong> (<em>std_ulogic</em>) – Asynch. reset control level</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Port:</th><td class="field-body"><ul class="first last simple">
<li><strong>Clock</strong> (<em>in std_ulogic</em>) – System clock</li>
<li><strong>Reset</strong> (<em>in std_ulogic</em>) – Asynchronous reset</li>
<li><strong>Enable</strong> (<em>in std_ulogic</em>) – Synchronous enable</li>
<li><strong>Rule_map</strong> (<em>in std_ulogic_vector</em>) – Rules for each cell ‘1’ -&gt; 150, ‘0’ -&gt; 90</li>
<li><strong>Left_in</strong> (<em>in std_ulogic</em>) – Left side input to LCAR</li>
<li><strong>Right_in</strong> (<em>in std_ulogic</em>) – Right side input to LCAR</li>
<li><strong>State</strong> (<em>out std_ulogic_vector</em>) – The state of each cell</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
</div>
<div class="section" id="subprograms">
<h2>Subprograms<a class="headerlink" href="#subprograms" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="extras.lcar_ops.next_wolfram_lcar[std_ulogic_vector,std_ulogic_vector,std_ulogic,std_ulogic return std_ulogic_vector]">
<code class="descclassname">lcar_ops.</code><code class="descname">next_wolfram_lcar</code> <span class="sig-paren">(</span><em>State : std_ulogic_vector</em>; <em>Rule_map : std_ulogic_vector</em>; <em>Left_in : std_ulogic := '0'</em>; <em>Right_in : std_ulogic := '0'</em><span class="sig-paren">)</span> &#x2192; std_ulogic_vector<a class="headerlink" href="#extras.lcar_ops.next_wolfram_lcar[std_ulogic_vector,std_ulogic_vector,std_ulogic,std_ulogic return std_ulogic_vector]" title="Permalink to this definition">¶</a></dt>
<dd><blockquote>
<div>Determine the next state of the LCAR defined by the Rule_map.</div></blockquote>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>State</strong> (<em>std_ulogic_vector</em>) – Current state of the LCAR cells</li>
<li><strong>Rule_map</strong> (<em>std_ulogic_vector</em>) – Rules for each cell; ‘1’ -&gt; 150, ‘0’ -&gt; 90</li>
<li><strong>Left_in</strong> (<em>std_ulogic</em>) – Left side input to LCAR</li>
<li><strong>Right_in</strong> (<em>std_ulogic</em>) – Right side input to LCAR</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">Next iteration of the LCAR rules which becomes the new state</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="extras.lcar_ops.lcar_rule[positive return std_ulogic_vector]">
<code class="descclassname">lcar_ops.</code><code class="descname">lcar_rule</code> <span class="sig-paren">(</span><em>Size : positive</em><span class="sig-paren">)</span> &#x2192; std_ulogic_vector<a class="headerlink" href="#extras.lcar_ops.lcar_rule[positive return std_ulogic_vector]" title="Permalink to this definition">¶</a></dt>
<dd><blockquote>
<div>Lookup a predefined rule set from the table.</div></blockquote>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>Size</strong> (<em>positive</em>) – Number of LCAR cells</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">Rule map for a maximal length sequence.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../../index.html">
              <img class="logo" src="../../_static/vhdl-extras-sm.png" alt="Logo"/>
            </a></p>
<!--<h1 class="logo"><a href="../../index.html">VHDL-extras</a></h1>-->



<p class="blurb">Flexible VHDL library</p>




<p>
<iframe src="https://ghbtns.com/github-btn.html?user=kevinpt&repo=vhdl-extras&type=watch&count=true&size=large&v=2"
  allowtransparency="true" frameborder="0" scrolling="0" width="200px" height="35px"></iframe>
</p>



<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../../index.html">Documentation overview</a><ul>
      <li>Previous: <a href="interrupt_ctl.html" title="previous chapter">interrupt_ctl</a></li>
      <li>Next: <a href="lfsr_ops.html" title="next chapter">lfsr_ops</a></li>
  </ul></li>
</ul>
</div>
  <h3><a href="../../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">lcar_ops</a><ul>
<li><a class="reference internal" href="#dependencies">Dependencies</a></li>
<li><a class="reference internal" href="#description">Description</a></li>
<li><a class="reference internal" href="#components">Components</a><ul>
<li><a class="reference internal" href="#wolfram-lcar">wolfram_lcar</a></li>
</ul>
</li>
<li><a class="reference internal" href="#subprograms">Subprograms</a></li>
</ul>
</li>
</ul>
<h3>Other projects</h3>

<div id="proj_list">
<p>
<a href="http://kevinpt.github.io/opbasm/">Opbasm</a><br>
<a href="http://kevinpt.github.io/ripyl/">Ripyl</a><br>
<a href="http://code.google.com/p/vertcl">Vertcl</a><br>

<a href="http://kevinpt.github.io/lecroy-colorizer/">Lecroy-colorizer</a>
</p>
</div>

<script>
$(function() { // Retrieve list of repositories from Github and dynamically insert them into sidebar

if(!window.sessionStorage || !JSON) { return; } // Punt on crusty browsers (looking at you IE10)

function JSONP( url, callback ) {
	var id = ( 'jsonp' + Math.random() * new Date() ).replace('.', '');
	var script = document.createElement('script');
	script.src = url.replace( 'callback=?', 'callback=' + id );
	document.body.appendChild( script );
	window[ id ] = function( data ) {
		if (callback) {
			callback( data );
		}
	};
}

function insert_projects(projects) {
    var links = [];
    var cur_proj = "VHDL-extras".toLowerCase();
    $.each(projects, function(key, value) {
      if(key != cur_proj) {
        var title = key.replace(/^./, function(match) {return match.toUpperCase()}); // Capitalize first char
        links.push("<a href='"+ value +"'>" + title + "</a>");
      }
    });
    
    $("#proj_list").html("<p>"+ links.join("<br>") +"</p>");
}

var now = new Date().getTime();
if(sessionStorage.KTcacheTime && now - sessionStorage.KTcacheTime < 5*60*1000 ) { // Use cached values (5 min. expiry)
  insert_projects(JSON.parse(sessionStorage.KTprojects));
} else { // Retrieve current projects
  JSONP("https://api.github.com/users/kevinpt/repos?type=owner&callback=?", function(response) {
    var projects = {};
    $.each(response.data, function(index, value) {
      projects[value.name] = value.homepage;
    });
    
    insert_projects(projects);
    
    // Store data in session cache
    sessionStorage.KTprojects = JSON.stringify(projects);
    var now = new Date().getTime();
    sessionStorage.KTcacheTime = now;
  });  
}

});
</script>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="../../search.html" method="get">
      <div><input type="text" name="q" /></div>
      <div><input type="submit" value="Go" /></div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>

    <div class="footer">
      &copy;2017, Kevin Thibedeau.
      
      |
      <a href="../../_sources/rst/modules/lcar_ops.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    


  </body>
</html>