
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>interrupt_ctl &#8212; VHDL-extras 1.0 documentation</title>
    <link rel="stylesheet" href="../../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/project.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '1.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <script type="text/javascript" src="http://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS_CHTML"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="lcar_ops" href="lcar_ops.html" />
    <link rel="prev" title="hamming_edac" href="hamming_edac.html" />
   
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9">

  </head>
  <body>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="interrupt-ctl">
<h1>interrupt_ctl<a class="headerlink" href="#interrupt-ctl" title="Permalink to this headline">¶</a></h1>
<p><a class="reference external" href="https://github.com/kevinpt/vhdl-extras/blob/master/rtl/extras/interrupt_ctl.vhdl">extras/interrupt_ctl.vhdl</a></p>
<div class="section" id="dependencies">
<h2>Dependencies<a class="headerlink" href="#dependencies" title="Permalink to this headline">¶</a></h2>
<p>None</p>
</div>
<div class="section" id="description">
<h2>Description<a class="headerlink" href="#description" title="Permalink to this headline">¶</a></h2>
<p>This package provides a general purpose interrupt controller that handles
the management of multiple interrupt sources. It uses unconstrained arrays
to specify the interrupt vector signals. It can thus be sized as needed to
suit required number of interrupts.</p>
<p>The priority of the interrupts is fixed with the lowest index having the
highest priority. You can use ascending or descending ranges for the
control vectors. Multiple pending interrupts are serviced from highest to
lowest priority. If a higher priority interrupt arrives when a lower
priority interrupt is currently in service, the higher priority interrupt
takes effect after the lower interrupt is acknowledged. If you disable a
pending interrupt with its mask it will not return after reenabling the mask
bit until the next interrupt arrives.</p>
<div class="section" id="example-usage">
<h3>Example usage<a class="headerlink" href="#example-usage" title="Permalink to this headline">¶</a></h3>
<div class="highlight-vhdl"><div class="highlight"><pre><span class="c1">-- Create an 8-bit interrupt controller</span>
<span class="k">signal</span> <span class="n">int_mask</span><span class="p">,</span> <span class="n">int_request</span><span class="p">,</span> <span class="n">pending_int</span><span class="p">,</span> <span class="n">current_int</span> <span class="o">:</span>
      <span class="kt">std_ulogic_vector</span><span class="p">(</span><span class="mi">7</span> <span class="k">downto</span> <span class="mi">0</span><span class="p">);</span>
<span class="p">...</span>
<span class="c1">-- Disable interrupts 5, 6, and 7</span>
<span class="n">int_mask</span> <span class="o">&lt;=</span> <span class="p">(</span><span class="mi">7</span> <span class="k">downto</span> <span class="mi">5</span> <span class="o">=&gt;</span> <span class="sc">&#39;0&#39;</span><span class="p">,</span> <span class="k">others</span> <span class="o">=&gt;</span> <span class="sc">&#39;1&#39;</span><span class="p">);</span>
<span class="n">ic</span><span class="o">:</span> <span class="n">interrupt_ctl</span>
 <span class="k">port</span> <span class="k">map</span> <span class="p">(</span>
   <span class="n">Clock</span> <span class="o">=&gt;</span> <span class="n">clock</span><span class="p">,</span>
   <span class="n">Reset</span> <span class="o">=&gt;</span> <span class="n">reset</span><span class="p">,</span>

   <span class="n">Int_mask</span>    <span class="o">=&gt;</span> <span class="n">int_mask</span><span class="p">,</span>     <span class="c1">-- Mask to enable/disable interrupts</span>
   <span class="n">Int_request</span> <span class="o">=&gt;</span> <span class="n">int_request</span><span class="p">,</span>  <span class="c1">-- Interrupt sources</span>
   <span class="n">Pending</span>     <span class="o">=&gt;</span> <span class="n">pending_int</span><span class="p">,</span>  <span class="c1">-- Current set of pending interrupts</span>
   <span class="n">Current</span>     <span class="o">=&gt;</span> <span class="n">current_int</span><span class="p">,</span>  <span class="c1">-- Vector identifying which interrupt is active</span>

   <span class="n">Interrupt</span>     <span class="o">=&gt;</span> <span class="n">interrupt</span><span class="p">,</span>     <span class="c1">-- Signal when an interrupt is ping</span>
   <span class="n">Acknowledge</span>   <span class="o">=&gt;</span> <span class="n">interrupt_ack</span><span class="p">,</span> <span class="c1">-- Acknowledge the interrupt has been serviced</span>
   <span class="n">Clear_pending</span> <span class="o">=&gt;</span> <span class="n">clear_pending</span>  <span class="c1">-- Optional control to clear all</span>
 <span class="p">);</span>

<span class="c1">-- Assemble interrupt sources into a request vector</span>
<span class="n">int_request</span> <span class="o">&lt;=</span> <span class="p">(</span>
 <span class="mi">0</span> <span class="o">=&gt;</span> <span class="n">source1</span><span class="p">,</span> <span class="c1">-- Highest priority</span>
 <span class="mi">1</span> <span class="o">=&gt;</span> <span class="n">source2</span><span class="p">,</span>
 <span class="mi">2</span> <span class="o">=&gt;</span> <span class="n">source3</span><span class="p">,</span>
 <span class="mi">3</span> <span class="o">=&gt;</span> <span class="n">source4</span><span class="p">,</span> <span class="c1">-- Lowest priority</span>
 <span class="k">others</span> <span class="o">=&gt;</span> <span class="sc">&#39;0&#39;</span><span class="p">);</span> <span class="c1">-- The remaining sources are unused</span>
</pre></div>
</div>
<span class="target" id="package-extras.interrupt_ctl_pkg"></span></div>
</div>
<div class="section" id="components">
<h2>Components<a class="headerlink" href="#components" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id1">
<h3>interrupt_ctl<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h3>
<object data="../../_images/symbol-interrupt_ctl_pkg-interrupt_ctl.svg" type="image/svg+xml">
            <p class="warning">component interrupt_ctl is
generic (
  RESET_ACTIVE_LEVEL : std_ulogic
);
port (
  --# {{clocks|}}
  Clock : in std_ulogic;
  Reset : in std_ulogic;
  --# {{control|}}
  Int_mask : in std_ulogic_vector;
  Int_request : in std_ulogic_vector;
  Pending : out std_ulogic_vector;
  Current : out std_ulogic_vector;
  Interrupt : out std_ulogic;
  Acknowledge : in std_ulogic;
  Clear_pending : in std_ulogic
);
end component;</p></object>
<div class="line-block">
<div class="line"><br /></div>
</div>
<dl class="entity">
<dt id="extras.interrupt_ctl_pkg.interrupt_ctl">
<code class="descclassname">interrupt_ctl_pkg.</code><code class="descname">interrupt_ctl</code><a class="headerlink" href="#extras.interrupt_ctl_pkg.interrupt_ctl" title="Permalink to this definition">¶</a></dt>
<dd><p>Priority interrupt controller.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Generics:</th><td class="field-body"><ul class="first simple">
<li><strong>RESET_ACTIVE_LEVEL</strong> (<em>std_ulogic</em>) – Asynch. reset control level</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Port:</th><td class="field-body"><ul class="first last simple">
<li><strong>Clock</strong> (<em>in std_ulogic</em>) – System clock</li>
<li><strong>Reset</strong> (<em>in std_ulogic</em>) – Asynchronous reset</li>
<li><strong>Int_mask</strong> (<em>in std_ulogic_vector</em>) – Set bits correspond to active interrupts</li>
<li><strong>Int_request</strong> (<em>in std_ulogic_vector</em>) – Controls used to activate new interrupts</li>
<li><strong>Pending</strong> (<em>out std_ulogic_vector</em>) – Set bits indicate which interrupts are pending</li>
<li><strong>Current</strong> (<em>out std_ulogic_vector</em>) – Single set bit for the active interrupt</li>
<li><strong>Interrupt</strong> (<em>out std_ulogic</em>) – Flag indicating when an interrupt is pending</li>
<li><strong>Acknowledge</strong> (<em>in std_ulogic</em>) – Clear the active interupt</li>
<li><strong>Clear_pending</strong> (<em>in std_ulogic</em>) – Clear all pending interrupts</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../../index.html">
              <img class="logo" src="../../_static/vhdl-extras-sm.png" alt="Logo"/>
            </a></p>
<!--<h1 class="logo"><a href="../../index.html">VHDL-extras</a></h1>-->



<p class="blurb">Flexible VHDL library</p>




<p>
<iframe src="https://ghbtns.com/github-btn.html?user=kevinpt&repo=vhdl-extras&type=watch&count=true&size=large&v=2"
  allowtransparency="true" frameborder="0" scrolling="0" width="200px" height="35px"></iframe>
</p>



<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../../index.html">Documentation overview</a><ul>
      <li>Previous: <a href="hamming_edac.html" title="previous chapter">hamming_edac</a></li>
      <li>Next: <a href="lcar_ops.html" title="next chapter">lcar_ops</a></li>
  </ul></li>
</ul>
</div>
  <h3><a href="../../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">interrupt_ctl</a><ul>
<li><a class="reference internal" href="#dependencies">Dependencies</a></li>
<li><a class="reference internal" href="#description">Description</a><ul>
<li><a class="reference internal" href="#example-usage">Example usage</a></li>
</ul>
</li>
<li><a class="reference internal" href="#components">Components</a><ul>
<li><a class="reference internal" href="#id1">interrupt_ctl</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<h3>Other projects</h3>

<div id="proj_list">
<p>
<a href="http://kevinpt.github.io/opbasm/">Opbasm</a><br>
<a href="http://kevinpt.github.io/ripyl/">Ripyl</a><br>
<a href="http://code.google.com/p/vertcl">Vertcl</a><br>

<a href="http://kevinpt.github.io/lecroy-colorizer/">Lecroy-colorizer</a>
</p>
</div>

<script>
$(function() { // Retrieve list of repositories from Github and dynamically insert them into sidebar

if(!window.sessionStorage || !JSON) { return; } // Punt on crusty browsers (looking at you IE10)

function JSONP( url, callback ) {
	var id = ( 'jsonp' + Math.random() * new Date() ).replace('.', '');
	var script = document.createElement('script');
	script.src = url.replace( 'callback=?', 'callback=' + id );
	document.body.appendChild( script );
	window[ id ] = function( data ) {
		if (callback) {
			callback( data );
		}
	};
}

function insert_projects(projects) {
    var links = [];
    var cur_proj = "VHDL-extras".toLowerCase();
    $.each(projects, function(key, value) {
      if(key != cur_proj) {
        var title = key.replace(/^./, function(match) {return match.toUpperCase()}); // Capitalize first char
        links.push("<a href='"+ value +"'>" + title + "</a>");
      }
    });
    
    $("#proj_list").html("<p>"+ links.join("<br>") +"</p>");
}

var now = new Date().getTime();
if(sessionStorage.KTcacheTime && now - sessionStorage.KTcacheTime < 5*60*1000 ) { // Use cached values (5 min. expiry)
  insert_projects(JSON.parse(sessionStorage.KTprojects));
} else { // Retrieve current projects
  JSONP("https://api.github.com/users/kevinpt/repos?type=owner&callback=?", function(response) {
    var projects = {};
    $.each(response.data, function(index, value) {
      projects[value.name] = value.homepage;
    });
    
    insert_projects(projects);
    
    // Store data in session cache
    sessionStorage.KTprojects = JSON.stringify(projects);
    var now = new Date().getTime();
    sessionStorage.KTcacheTime = now;
  });  
}

});
</script>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="../../search.html" method="get">
      <div><input type="text" name="q" /></div>
      <div><input type="submit" value="Go" /></div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>

    <div class="footer">
      &copy;2017, Kevin Thibedeau.
      
      |
      <a href="../../_sources/rst/modules/interrupt_ctl.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    


  </body>
</html>